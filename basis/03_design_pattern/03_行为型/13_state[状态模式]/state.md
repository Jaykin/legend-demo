# 状态模式

## 概述
### 核心思想
* 关键是 `区分事物内部的状态`，因为事物内部状态的改变往往会带来事物的行为改变，即不同的状态下，同样的行为会造成不同的效果
* 把事物的每种状态都封装成单独的类，跟此状态有关的行为都封装在内部（即区分状态，多种方式-原型/类/普通对象），然后只需在上下文中，把关于状态的请求委托给当前的状态对象，由状态对象负责自身的行为

### 适用场景
* 需维护实体 `很多种类的状态`、`状态的切换逻辑`、`状态切换后的效果`
* 如：交替切换一个 button 的 class

### 优点
* 定义了状态及相应行为之间的关系，并封装在一个类里。通过增加新的状态类，很容易增加新的状态和转换
* 状态切换的逻辑分布在状态类中，避免上下文无限膨胀
* 用对象代替字符串来记录当前状态，使得状态的切换更加一目了然
* Context 中的请求动作和状态类中封装的行为可以非常容易地独立变化而互不影响

### 缺点
* 会定义许多状态类，因此而增加不少对象
* 逻辑分散在状态类中，造成了逻辑分散的问题

## 通用结构
* 定义上下文（即包含多种状态的实体）；持有各状态类的实例对象；并将请求委托给状态对象
* 创建状态类，封装与本状态相关的行为；并需要持有上下文的引用（通信） 

## 有限状态机 Finite-state machine
* https://www.cnblogs.com/lyzg/p/5058335.html
* https://github.com/jakesgordon/javascript-state-machine