<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>菜单程序</title>
    <style>

    </style>
</head>
<body>
    <button id="btn1">点击按钮 1</button>
    <button id="btn2">点击按钮 2</button>
    <button id="btn3">点击按钮 3</button>

    <script>
        // 请求方
        var btn1 = document.getElementById('btn1');
        var btn2 = document.getElementById('btn2');
        var btn3 = document.getElementById('btn3');

        var setCommand = function (target, command) {
            target.onclick = function () {
                command.execute();
            }
        }
    </script>

    <script>
        // 接收方
        var menuBar = {
            refresh: function () {
                console.log('刷新菜单目录');
            }
        }

        var subMenu = {
            add: function () {
                console.log('增加子菜单');
            },

            del: function () {
                console.log('删除子菜单');
            }
        }

    </script>

    <script>
        // 命令构建方--即连接请求方和接收方
            // 刷新命令
        var RefreshCommand = function (receiver) {
            this.receiver = receiver;
        }
        RefreshCommand.prototype.execute = function () {
            this.receiver.refresh();
        }

            // 增加命令
        var AddCommand = function (receiver) {
            this.receiver = receiver;
        }
        AddCommand.prototype.execute = function () {
            this.receiver.add();
        }

            // 删除命令
        var DelCommand = function (receiver) {
            this.receiver = receiver;
        }
        DelCommand.prototype.execute = function () {
            this.receiver.del();
        }
    </script>

    <script>
        //
        setCommand(btn1, new RefreshCommand(menuBar));
        setCommand(btn2, new AddCommand(subMenu));
        setCommand(btn3, new DelCommand(subMenu));

    </script>

    <script>
        // 使用JS函数构建命令
        var RefreshCommand = function (receiver) {
            return {
                execute: function () {
                    receiver.refresh();
                }
            }
        }

        setCommand(btn1, RefreshCommand(menuBar));

    </script>
</body>
</html>