<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="user-scalable=no, initial-scale=2.0" />-->
    <title>Viewport</title>
    <script>
        // 01 利用scale进行适配
            // 能解决适配 和 retina屏的1px问题
        var scale = 1 / window.devicePixelRatio;
        var metaVp = '<meta name="viewport" content="user-scalable=no, initial-scale=' + scale + '" />';
        document.head.innerHTML = document.head.innerHTML + metaVp;

        var deviceCssWidth = document.documentElement.clientWidth;

        if (deviceCssWidth > 750 * (1 / scale)) deviceCssWidth = 750 * (1 / scale);

        document.documentElement.style.fontSize = deviceCssWidth / 7.5 + 'px';
    </script>
    <script>
        // 02 利用rem进行适配
        /**
         * 注意：
         *      1、有些css属性有浏览器默认的最小值，所以当使用rem单位时，对于这些值的设置并不会呈现为期望的值
         *      2、如：chrome的默认最小font-size就为12px，所以对于字体来说，最好不使用rem，而使用其他值
         *      3、但这样的话，字体就适配不了。怎么搞呢？？  对字体设置进行媒体查询
         *      4、这样只解决了适配问题，却在retina屏上有1px问题
         * */
//        var htmlDom = document.documentElement;
//        var deviceCssWidth = htmlDom.clientWidth;
//
//        if (deviceCssWidth > 750) {
//            // 避免超出设计稿的大小
//            deviceCssWidth = 750;
//        }
//
//        htmlDom.style.fontSize = 100 * deviceCssWidth / 750 + 'px';
    </script>
    <style>
        body, html {
            margin: 0;
        }

        body {
            font-size: 0.24rem;
        }

        .viewport-box {
            width: 7.5rem;
            height: 2rem;
            color: #fff;
            background-color: yellowgreen;
        }
    </style>
</head>
<body>
    <div class="viewport-box">
        viewport
    </div>
</body>
</html>